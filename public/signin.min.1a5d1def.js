webpackJsonp([12],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=a(107),s=n(r),o=a(1),l=n(o),i=a(72),u=n(i);u["default"].render(l["default"].createElement(s["default"],null),document.getElementById("framework"))},7:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationRule=t.TipMessage=t.Storage=t.Request=t.PubSubMsg=t.Cookie=t.Common=void 0;var s=a(10),o=r(s),l=a(13),i=n(l),u=a(8),d=n(u),c=a(9),f=n(c),m=a(18),h=n(m),g=a(3),p=n(g),w=a(11),E=n(w);t.Common=o,t.Cookie=i["default"],t.PubSubMsg=d["default"],t.Request=f["default"],t.Storage=h["default"],t.TipMessage=p["default"],t.ValidationRule=E["default"]},11:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(3),s=n(r),o=a(4),l=n(o);t["default"]={required:function(e){return{required:!0,message:s["default"].canNotBeNull(e)}},loginName:function(e){return{validator:function(t,a,n){a&&!/^[a-zA-Z0-9\-_]+$/i.test(a)?n(new Error(e||s["default"].loginNameFormatError)):n()}}},checkLoginNameExist:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return"string"==typeof e&&(e=[e]),{validator:function(t,a,n){return!a||e.indexOf(a)>-1?n():void l["default"].get("/api/organization/users/loginname/"+a).end(function(e,t){return e||!t.ok?n([new Error(t&&t.body&&t.body.message||"未知系统错误")]):t.body&&a===t.body.loginname?n([new Error("抱歉，该登录名已被占用！")]):void n()})}}},checkRoleNameExist:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return"string"==typeof e&&(e=[e]),{validator:function(t,a,n){return!a||e.indexOf(a)>-1?n():void l["default"].get("/api/organization/users/loginname/"+a).end(function(e,t){return e||!t.ok?n([new Error(t&&t.body&&t.body.message||"未知系统错误")]):t.body&&a===t.body.loginname?n([new Error("抱歉，该登录名已被占用！")]):void n()})}}},mobile:function(e){return{validator:function(t,a,n){var r=/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/;a&&!r.test(a)?n(new Error(e||s["default"].mobileFormatError)):n()}}},email:function(e){return{type:"email",message:e||s["default"].emailFormatError}}},e.exports=t["default"]},13:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={getCookie:function(e){for(var t=document.cookie.split("; "),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]===e)return unescape(n[1])}return""}},e.exports=t["default"]},107:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return!1}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(115);var u=a(1),d=n(u),c=a(7),f=a(173),m=n(f),h=a(174),g=n(h),p=a(3),w=n(p),E=function(e){function t(){var e,a,n,o;r(this,t);for(var l=arguments.length,i=Array(l),u=0;l>u;u++)i[u]=arguments[u];return a=n=s(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={loading:!1,loaded:!1,name:"",pass:"",error:"",showFirstLogin:!1,newPass:"",reNewPass:"",newPassError:""},n.handleNameChange=function(e){var t=e.target.value;t?n.showError(""):n.showError(w["default"].loginNameIsRequired),n.setState({name:t})},n.handlePassChange=function(e){var t=e.target.value;t?n.showError(""):n.showError(w["default"].passIsRequired),n.setState({pass:t})},n.showError=function(e){n.setState({error:e})},n.handleNewPassChange=function(e){var t=e.target.value;t?t.length<6?n.showNewPassError(w["default"].passFormatError):n.showNewPassError(""):n.showNewPassError(w["default"].newPassIsRequired),n.setState({newPass:t})},n.handleReNewPassChange=function(e){var t=e.target.value;t?t!==n.state.newPass?n.showNewPassError(w["default"].towPassIsDifferent):t.length<6?n.showNewPassError(w["default"].passFormatError):n.showNewPassError(""):n.showNewPassError(w["default"].reNewPassIsRequired),n.setState({reNewPass:t})},n.showNewPassError=function(e){n.setState({newPassError:e})},n.handleKeyDown=function(e){"Enter"===e.key&&n.handleSubmit(e)},n.handleNewPassKeyDown=function(e){"Enter"===e.key&&n.handleNewPassSubmit(e)},n.handleNewPassSubmit=function(e){if(!n.state.loading){e.preventDefault();var t=n.state.newPass,a=n.state.reNewPass;if(!t)return n.showNewPassError(w["default"].newPassIsRequired);if(!a)return n.showNewPassError(w["default"].reNewPassIsRequired);if(t!==a)return n.showNewPassError(w["default"].towPassIsDifferent);var r={pass:t,rePass:a};n.setState({loading:!0}),c.Request.put("/first_login").send(r).end(function(e,t){if(e||!t.ok)n.setState({loading:!1}),n.showNewPassError(t.body.message);else{var a=t.body.refer||"/",r=t.body.menus||[],s=t.body.user;c.Storage.session.set("currentLoginUser",s),c.Storage.session.set("menus",r),location.href=a}})}},n.handleSubmit=function(e){if(!n.state.loading){e.preventDefault();var t=n.state.name,a=n.state.pass;if(!t)return n.showError(w["default"].loginNameIsRequired);if(!a)return n.showError(w["default"].passIsRequired);var r={name:t,pass:a};n.setState({loading:!0}),c.Request.post("/signin").send(r).end(function(e,t){if(e||!t.ok)n.showError(t.body.message),n.setState({loading:!1});else{if(t.body.user.is_first_login)return n.setState({showFirstLogin:!0,loading:!1}),!1;var a=t.body.refer||"/",r=t.body.menus||[],s=t.body.user;s.is_first_login?location.href="/first_login":(c.Storage.session.set("currentLoginUser",s),c.Storage.session.set("menus",r),location.href=a)}})}},o=a,s(n,o)}return o(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({loaded:!0})},500);var t=window.document.createElement("script");t.src="/public/antd.min.js";var a=window.document.createElement("link");a.rel="stylesheet",a.href="/public/antd.min.css",window.document.head.appendChild(t),window.document.head.appendChild(a)}},{key:"render",value:function(){return d["default"].createElement("div",{className:"login-wrap",style:{backgroundImage:"url("+m["default"]+")"}},d["default"].createElement("div",{className:"img-box "+(this.state.loaded?"loaded":"")},d["default"].createElement("img",{src:g["default"],alt:"img"}),d["default"].createElement("lable",{className:"circle-label small yellow position1"},"监控"),d["default"].createElement("lable",{className:"circle-label large blue position2"},"智能"),d["default"].createElement("lable",{className:"circle-label large red position3"},"巡检"),d["default"].createElement("lable",{className:"circle-label large purple position4"},"安全"),d["default"].createElement("div",{className:"massage position2"},"智能方便",d["default"].createElement("div",{className:"line"})),d["default"].createElement("div",{className:"massage position3"},"快速巡检",d["default"].createElement("div",{className:"line"})),d["default"].createElement("div",{className:"massage position4"},"安全可靠的技术支持",d["default"].createElement("div",{className:"line"}))),d["default"].createElement("div",{className:"login-box",style:{display:this.state.showFirstLogin?"none":"block"}},d["default"].createElement("h1",{className:"login-title"},"用户登录"),d["default"].createElement("div",{className:"form-item"},d["default"].createElement("label",{htmlFor:"name"},"用户名："),d["default"].createElement("input",{id:"name",type:"text",value:this.state.name,onChange:this.handleNameChange,onKeyDown:this.handleKeyDown,placeholder:"请输入登录名"})),d["default"].createElement("div",{className:"form-item"},d["default"].createElement("label",{htmlFor:"name"},"密码："),d["default"].createElement("input",{id:"name",type:"password",value:this.state.pass,onChange:this.handlePassChange,onKeyDown:this.handleKeyDown,placeholder:"请输入密码",onContextMenu:l,onPaste:l,onCopy:l,onCut:l})),d["default"].createElement("div",{className:"error"},this.state.error),d["default"].createElement("div",{className:"button "+(this.state.loading?"loading":""),onClick:this.handleSubmit},this.state.loading?"登录中。。。":"登录")),d["default"].createElement("div",{className:"login-box",style:{display:this.state.showFirstLogin?"block":"none"}},d["default"].createElement("h1",{className:"login-title",style:{marginBottom:0,paddingBottom:10}},"首次登录"),d["default"].createElement("div",{style:{textAlign:"center",paddingBottom:15}},"您为首次登录，请修改您的初始密码"),d["default"].createElement("div",{className:"form-item"},d["default"].createElement("label",{htmlFor:"name"},"新密码："),d["default"].createElement("input",{id:"name",type:"password",value:this.state.newPass,onChange:this.handleNewPassChange,onKeyDown:this.handleNewPassKeyDown,placeholder:"请输入新密码"})),d["default"].createElement("div",{className:"form-item"},d["default"].createElement("label",{htmlFor:"name"},"确认密码："),d["default"].createElement("input",{id:"name",type:"password",value:this.state.reNewPass,onChange:this.handleReNewPassChange,onKeyDown:this.handleNewPassKeyDown,placeholder:"请输入确认新密码",onContextMenu:l,onPaste:l,onCopy:l,onCut:l})),d["default"].createElement("div",{className:"error"},this.state.newPassError),d["default"].createElement("div",{className:"button "+(this.state.loading?"loading":""),onClick:this.handleNewPassSubmit},this.state.loading?"确认中。。。":"确认")))}}]),t}(d["default"].Component);t["default"]=E,e.exports=t["default"]},115:function(e,t){},173:function(e,t,a){e.exports=a.p+"bg-4ecbbc5.jpg"},174:function(e,t,a){e.exports=a.p+"bg4-df38d83.png"}});