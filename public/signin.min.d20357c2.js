webpackJsonp([12],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var l=a(109),r=n(l),o=a(1),s=n(o),i=a(52),u=n(i);u["default"].render(s["default"].createElement(r["default"],null),document.getElementById("framework"))},109:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){return!1}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(119);var u=a(1),c=n(u),d=a(9),f=a(180),m=n(f),p=a(181),h=n(p),b=function(e){function t(){var e,a,n,o;l(this,t);for(var s=arguments.length,i=Array(s),u=0;s>u;u++)i[u]=arguments[u];return a=n=r(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={loading:!1,loaded:!1,name:"",pass:"",error:""},n.handleNameChange=function(e){var t=e.target.value;t?n.showError(""):n.showError("请输入登录名"),n.setState({name:t})},n.handlePassChange=function(e){var t=e.target.value;t?n.showError(""):n.showError("请输入密码"),n.setState({pass:t})},n.showError=function(e){n.setState({error:e})},n.handleSubmit=function(e){if(!n.state.loading){e.preventDefault();var t=n.state.name,a=n.state.pass;if(!t)return n.showError("请输入登录名");if(!a)return n.showError("请输入密码");var l={name:t,pass:a};n.setState({loading:!0}),d.Request.post("/signin").send(l).end(function(e,t){if(e||!t.ok)n.showError(t.body.message),n.setState({loading:!1});else{var a=t.body.refer||"/",l=t.body.menus||[],r=t.body.user;r.is_first_login?location.href="/first_login":(d.Storage.session.set("currentLoginUser",r),d.Storage.session.set("menus",l),location.href=a)}})}},n.handleKeyDown=function(e){"Enter"===e.key&&n.handleSubmit(e)},o=a,r(n,o)}return o(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({loaded:!0})},500);var t=window.document.createElement("script");t.src="/public/antd.min.js";var a=window.document.createElement("link");a.rel="stylesheet",a.href="/public/antd.min.css",window.document.head.appendChild(t),window.document.head.appendChild(a)}},{key:"render",value:function(){return c["default"].createElement("div",{className:"login-wrap",style:{backgroundImage:"url("+m["default"]+")"}},c["default"].createElement("div",{className:"img-box "+(this.state.loaded?"loaded":"")},c["default"].createElement("img",{src:h["default"],alt:"img"}),c["default"].createElement("lable",{className:"circle-label small yellow position1"},"监控"),c["default"].createElement("lable",{className:"circle-label large blue position2"},"智能"),c["default"].createElement("lable",{className:"circle-label large red position3"},"巡检"),c["default"].createElement("lable",{className:"circle-label large purple position4"},"安全"),c["default"].createElement("div",{className:"massage position2"},"智能方便",c["default"].createElement("div",{className:"line"})),c["default"].createElement("div",{className:"massage position3"},"快速巡检",c["default"].createElement("div",{className:"line"})),c["default"].createElement("div",{className:"massage position4"},"安全可靠的技术支持",c["default"].createElement("div",{className:"line"}))),c["default"].createElement("div",{className:"login-box"},c["default"].createElement("h1",{className:"login-title"},"用户登录"),c["default"].createElement("div",{className:"form-item"},c["default"].createElement("label",{htmlFor:"name"},"用户名："),c["default"].createElement("input",{id:"name",type:"text",value:this.state.name,onChange:this.handleNameChange,onKeyDown:this.handleKeyDown,placeholder:"请输入登录名"})),c["default"].createElement("div",{className:"form-item"},c["default"].createElement("label",{htmlFor:"name"},"密码："),c["default"].createElement("input",{id:"name",type:"password",value:this.state.pass,onChange:this.handlePassChange,onKeyDown:this.handleKeyDown,placeholder:"请输入密码",onContextMenu:s,onPaste:s,onCopy:s,onCut:s})),c["default"].createElement("div",{className:"error"},this.state.error),c["default"].createElement("div",{className:"button "+(this.state.loading?"loading":""),onClick:this.handleSubmit},this.state.loading?"登录中。。。":"登录")))}}]),t}(c["default"].Component);t["default"]=b,e.exports=t["default"]},119:function(e,t){},180:function(e,t,a){e.exports=a.p+"bg-4ecbbc5.jpg"},181:function(e,t,a){e.exports=a.p+"bg4-df38d83.png"}});